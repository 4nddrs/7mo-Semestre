## 🎯 Objetivo

- Desplegar un contenedor vulnerable (`IP: 172.17.0.2`).
- Identificar servicios activos mediante escaneo de puertos con **Nmap**.
- Verificar los privilegios de los servicios usando un script personalizado (`exploit.py`).
- Proporcionar recomendaciones para mitigar los riesgos detectados.

## 🛠️ Metodología

### 1. Despliegue del Contenedor
![[Pasted image 20250424154306.png]]

El contenedor vulnerable se desplegó con el siguiente comando:
```bash
bash auto_deploy.sh firsthacking.tar
```
- El script confirmó que el contenedor se ejecutaba en la IP `172.17.0.2`.
- Se indicó que podía detenerse con `Ctrl + C`.

### 2. 🕵️‍♂️ Exploración del Entorno
![[Pasted image 20250424154322.png]]

1. Ejecutamos una utilidad que tenemos definida que es `mkt`
2. Al listar el contenido del contenedor con `ls`, se encontraron los siguientes directorios:
	- `content/`
	    
	- `exploits/`
	    
	- `nmap/`
	    
	- `scripts/`
### 3. 🔍 Escaneo de Puertos con Nmap
![[Pasted image 20250424154428.png]]

Se utilizó **Nmap** para identificar puertos abiertos en la máquina objetivo (`172.17.0.2`):
```bash
sudo nmap -p- --open --min-rate 5000 -sS -vvv -n -Pn 172.17.0.2 -oG allPorts
```
#### 📌 Desglose del Comando

- `-p-`: Escanea todos los 65535 puertos.
- `--open`: Muestra solo los puertos abiertos.
- `--min-rate 5000`: Envía al menos 5000 paquetes por segundo.
- `-sS`: Escaneo SYN (rápido y sigiloso).
- `-vvv`: Salida muy detallada.
- `-n`: Evita la resolución DNS.
- `-Pn`: Omite la verificación de host activo.
- `-oG allPorts`: Guarda los resultados en formato **Grepable**.
#### 📋 Resultados

- **Puerto 21 (FTP)**: Servicio de transferencia de archivos.

### 4. 🎯 Confirmación de Puertos y Análisis Detallado
![[Pasted image 20250424154802.png]]

Se extrajeron los puertos detectados con el script `extractPorts`:
```bash
extractPorts allPorts
```
>[! Important]
>Puertos confirmados: `21 (FTP)`

A continuación, se realizó un escaneo específico sobre el puerto **21** para obtener más detalles:
```bash
nmap -p21 -sC -sV 172.17.0.2 -oN targeted
```
#### 📌 Desglose del Comando

- `-p21`: aplicar el escaneo solo al puerto 21 > `-sC` ⮞ ejecuta los scripts de reconocimiento básico, los más comunes  
- `-sV`: para conocer la versión del servicio que corre por el puerto (se puede juntar con el anterior y quedaría así `-sCV`)  
- `-sS`: para descubrir puertos de manera silenciosa y rápida  
- `-oN`: lo exporta en formato nmap al archivo targeted

![[Pasted image 20250424154842.png]]

#### 📋Resultado

- **Puerto 21**: Servicio FTP activo.
### 5. 🔓 Verificación de Privilegios con `exploit.py`

Se utilizó un script personalizado para comprobar los privilegios de acceso a los servicios detectados:
```bash
source venv/bin/activate
python3 exploit.py 172.17.0.2
```
![[Pasted image 20250424155215.png]]
#### 📋Resultados
El comando `whoami` dentro del exploit devolvió `root`, indicando una **vulnerabilidad crítica**.
![[Pasted image 20250424155228.png]]