## ğŸ¯ Objetivo

- Desplegar un contenedor vulnerable (`IP: 172.17.0.2`).
- Identificar servicios activos mediante escaneo de puertos con **Nmap**.
- Verificar los privilegios de los servicios usando un script personalizado (`exploit.py`).
- Proporcionar recomendaciones para mitigar los riesgos detectados.

## ğŸ› ï¸ MetodologÃ­a

### 1. Despliegue del Contenedor
![[Pasted image 20250424154306.png]]

El contenedor vulnerable se desplegÃ³ con el siguiente comando:
```bash
bash auto_deploy.sh firsthacking.tar
```
- El script confirmÃ³ que el contenedor se ejecutaba en la IP `172.17.0.2`.
- Se indicÃ³ que podÃ­a detenerse con `Ctrl + C`.

### 2. ğŸ•µï¸â€â™‚ï¸ ExploraciÃ³n del Entorno
![[Pasted image 20250424154322.png]]

1. Ejecutamos una utilidad que tenemos definida que es `mkt`
2. Al listar el contenido del contenedor con `ls`, se encontraron los siguientes directorios:
	- `content/`
	    
	- `exploits/`
	    
	- `nmap/`
	    
	- `scripts/`
### 3. ğŸ” Escaneo de Puertos con Nmap
![[Pasted image 20250424154428.png]]

Se utilizÃ³ **Nmap** para identificar puertos abiertos en la mÃ¡quina objetivo (`172.17.0.2`):
```bash
sudo nmap -p- --open --min-rate 5000 -sS -vvv -n -Pn 172.17.0.2 -oG allPorts
```
#### ğŸ“Œ Desglose del Comando

- `-p-`: Escanea todos los 65535 puertos.
- `--open`: Muestra solo los puertos abiertos.
- `--min-rate 5000`: EnvÃ­a al menos 5000 paquetes por segundo.
- `-sS`: Escaneo SYN (rÃ¡pido y sigiloso).
- `-vvv`: Salida muy detallada.
- `-n`: Evita la resoluciÃ³n DNS.
- `-Pn`: Omite la verificaciÃ³n de host activo.
- `-oG allPorts`: Guarda los resultados en formato **Grepable**.
#### ğŸ“‹ Resultados

- **Puerto 21 (FTP)**: Servicio de transferencia de archivos.

### 4. ğŸ¯ ConfirmaciÃ³n de Puertos y AnÃ¡lisis Detallado
![[Pasted image 20250424154802.png]]

Se extrajeron los puertos detectados con el script `extractPorts`:
```bash
extractPorts allPorts
```
>[! Important]
>Puertos confirmados: `21 (FTP)`

A continuaciÃ³n, se realizÃ³ un escaneo especÃ­fico sobre el puerto **21** para obtener mÃ¡s detalles:
```bash
nmap -p21 -sC -sV 172.17.0.2 -oN targeted
```
#### ğŸ“Œ Desglose del Comando

- `-p21`: aplicar el escaneo solo al puerto 21 > `-sC` â® ejecuta los scripts de reconocimiento bÃ¡sico, los mÃ¡s comunes  
- `-sV`: para conocer la versiÃ³n del servicio que corre por el puerto (se puede juntar con el anterior y quedarÃ­a asÃ­ `-sCV`)  
- `-sS`: para descubrir puertos de manera silenciosa y rÃ¡pida  
- `-oN`: lo exporta en formato nmap al archivo targeted

![[Pasted image 20250424154842.png]]

#### ğŸ“‹Resultado

- **Puerto 21**: Servicio FTP activo.
### 5. ğŸ”“ VerificaciÃ³n de Privilegios con `exploit.py`

Se utilizÃ³ un script personalizado para comprobar los privilegios de acceso a los servicios detectados:
```bash
source venv/bin/activate
python3 exploit.py 172.17.0.2
```
![[Pasted image 20250424155215.png]]
#### ğŸ“‹Resultados
El comando `whoami` dentro del exploit devolviÃ³ `root`, indicando una **vulnerabilidad crÃ­tica**.
![[Pasted image 20250424155228.png]]